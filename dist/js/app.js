!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=6)}([function(e,t,n){e.exports=!n(5)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var o=n(20),i=n(21),r=n(23),s=Object.defineProperty;t.f=n(0)?Object.defineProperty:function(e,t,n){if(o(e),t=r(t,!0),o(n),i)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";function o(e){for(var t=window.location.search.substring(1),n=t.split("&"),o=0;o<n.length;o++){var i=n[o].split("=");if(decodeURIComponent(i[0])===e)return decodeURIComponent(i[1])}return null}function i(e){var t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return t&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),s=(n.n(r),n(8)),a=n(25);n.n(a);window.App={elements:{board:$("#board"),palette:$(".palette"),boardMover:$(".board-mover"),boardZoomer:$(".board-zoomer"),boardContainer:$(".board-container"),cursor:$(".cursor"),timer:$(".cooldown-timer"),reticule:$(".reticule"),alert:$(".message"),coords:$(".coords"),pixelInfo:$(".pixel-info"),chatContainer:$(".chat-container"),usersContainer:$(".users-container"),loginContainer:$(".login-container"),chatToggle:$(".toggle-chat"),usersToggle:$(".toggle-users"),loginToggle:$(".toggle-login"),loginButton:$(".login-button"),chatInput:$(".chat-input"),restrictedToggle:$(".restricted-toggle")},panX:0,panY:0,scale:4,maxScale:40,minScale:.75,cooldown:0,color:null,init:function(){var e=this;this.color=null,this.connectionLost=!1,this.showRestrictedAreas=!1,this.restrictedAreas=null,this.username=null,this.spectate_user=null,$(".board-container").hide(),$(".reticule").hide(),$(".ui").hide(),$(".message").hide(),$(".cursor").hide(),$(".cooldown-timer").hide(),this.elements.usersToggle.hide(),$.get("/boardinfo",this.initBoard.bind(this)),this.elements.pixelInfo.click(function(){e.elements.pixelInfo.addClass("hide")}),this.initBoardMovement(),this.initBoardPlacement(),this.initCursor(),this.initReticule(),this.initAlert(),this.initCoords(),this.initSidebar(),this.initMoveTicker(),this.initRestrictedAreas(),this.initContextMenu(),Notification.requestPermission()},initBoard:function(e){this.width=e.width,this.height=e.height,this.palette=e.palette,this.custom_colors=e.custom_colors,this.initPalette(),this.elements.board.attr("width",this.width).attr("height",this.height),this.updateTransform();var t=o("x")||this.width/2,n=o("y")||this.height/2;(t<0||t>=this.width)&&(t=this.width/2),(n<0||n>=this.height)&&(t=this.height/2),this.centerOn(t,n),this.scale=o("scale")||this.scale,this.updateTransform(),this.initSocket(),this.drawBoard()},drawBoard:function(){var e=this;this.image=new Image,this.image.onload=function(){e.connectionLost&&e.alert(null);var t=e.elements.board[0].getContext("2d");t.imageSmoothingEnabled=!1,t.drawImage(e.image,0,0,e.width,e.height)},this.image.onerror=function(){e.alert("Refreshing board..."),setTimeout(e.drawBoard.bind(e),1e3)},this.image.src="/board?d="+Date.now()},initRestrictedAreas:function(){this.elements.restrictedToggle.click(this.restrictedAreaToggle.bind(this))},restrictedAreaToggle:function(){this.loadRestrictedAreas(),this.showRestrictedAreas=!this.showRestrictedAreas,this.showRestrictedAreas?this.elements.restrictedToggle.text("Hide Restricted Areas"):this.elements.restrictedToggle.text("Show Restricted Areas")},loadRestrictedAreas:function(){var e=this;null===this.restrictedAreas&&$.get("/restricted",function(t){e.restrictedAreas=[],t.forEach(function(t){t.div=$("<div>",{class:"selection"}),$(".ui").append(t.div),e.restrictedAreas.push(t)})}),this.elements.board.on("mousemove",function(){null!==e.restrictedAreas&&e.restrictedAreas.forEach(function(t){if(e.showRestrictedAreas){var n=(t.endX-(t.startX-1))*l.scale,o=(t.endY-(t.startY-1))*l.scale,i=l.boardToScreenSpace(t.startX,t.startY);t.div.css("transform","translate("+i.x+"px, "+i.y+"px)"),t.div.css("width",n+"px").css("height",o+"px"),t.div.show()}else t.div.hide()})})},initPalette:function(){var e=this;this.palette.forEach(function(t,n){$("<div>").addClass("palette-color").css("background-color",t).click(function(){0===e.cooldown?e.switchColor(t):e.switchColor(null)}).appendTo(e.elements.palette)}),this.custom_colors&&($("<input>").addClass("color-picker").appendTo(this.elements.palette),$(".color-picker").spectrum({showPalette:!0,showInput:!0,allowEmpty:!0,preferredFormat:"hex",localStorageKey:"kti.place",change:function(t){e.switchColor(null!==t?t.toHexString():null)},show:function(){$(".color-picker").spectrum("reflow")}}))},initBoardMovement:function(){var e=this,t=function(t){e.panX+=t.dx/e.scale,e.panY+=t.dy/e.scale,e.updateTransform()};interact(this.elements.boardContainer[0]).draggable({inertia:!1,onmove:t}).gesturable({onmove:function(n){e.scale*=1+n.ds,e.updateTransform(),t(n)}}).styleCursor(!1),$(document).on("keydown",function(t){"BODY"===t.target.nodeName&&(87===t.keyCode||38===t.keyCode?e.panY=t.shiftKey?e.panY+=1:e.panY+=100/e.scale:83===t.keyCode||40===t.keyCode?e.panY=t.shiftKey?e.panY-=1:e.panY-=100/e.scale:65===t.keyCode||37===t.keyCode?e.panX=t.shiftKey?e.panX+=1:e.panX+=100/e.scale:68===t.keyCode||39===t.keyCode?e.panX=t.shiftKey?e.panX-=1:e.panX-=100/e.scale:81===t.keyCode||34===t.keyCode?(e.scale/=1.3,e.scale=Math.min(e.maxScale,Math.max(e.minScale,e.scale))):69===t.keyCode||33===t.keyCode?(e.scale*=1.3,e.scale=Math.min(e.maxScale,Math.max(e.minScale,e.scale))):27===t.keyCode&&(e.switchColor(null),e.elements.pixelInfo.addClass("hide"),e.elements.reticule.hide(),e.elements.cursor.hide()),e.updateTransform())}),this.elements.boardContainer.on("wheel",function(t){e.elements.pixelInfo.addClass("hide");var n=e.scale;t.originalEvent.deltaY>0?e.scale/=1.3:e.scale*=1.3,e.scale=Math.min(e.maxScale,Math.max(e.minScale,e.scale));var o=t.clientX-e.elements.boardContainer.width()/2,i=t.clientY-e.elements.boardContainer.height()/2;e.panX-=o/n,e.panX+=o/e.scale,e.panY-=i/n,e.panY+=i/e.scale,e.updateTransform()})},initBoardPlacement:function(){var e=this,t=void 0,n=void 0,o=!1,r=function(e){t=e.clientX,n=e.clientY,o=!1},s=function(r){null!==e.spectate_user&&(e.spectate_user=null,e.alert(null));var s=Math.abs(t-r.clientX),a=Math.abs(n-r.clientY);if(!o)if(o=!0,s<5&&a<5&&1===r.which){var c=e.screenToBoardSpace(r.clientX,r.clientY);if(null!==e.color&&e.cooldown<=0)e.elements.pixelInfo.addClass("hide"),e.place(c.x,c.y);else if(null===e.color){if(window.ModTools&&window.ModTools.selectionModeEnabled)return;e.centerOn(c.x,c.y);var l=e.boardToScreenSpace(c.x,c.y),u=.5*e.scale;e.elements.pixelInfo.css("transform","translate("+Math.floor(l.x+u)+"px, "+Math.floor(l.y+u)+"px)"),e.elements.pixelInfo.text("Loading"),e.elements.pixelInfo.removeClass("hide"),$.get("/pixel?x="+c.x+"&y="+c.y,function(t){if(null!==t){var n="rgb("+t.colorR+","+t.colorG+","+t.colorB+")",o=$("<span>").css("background-color",n);o.click(function(){e.switchColor(i(n))});var r=moment(t.createdAt).format("DD/MM/YYYY hh:mm:ss a");e.elements.pixelInfo.text("Placed by "+t.username+" at "+r),o.prependTo(e.elements.pixelInfo)}else e.elements.pixelInfo.text("Nothing has been placed here!")})}}else e.elements.pixelInfo.addClass("hide")};this.elements.board.on("pointerdown",r).on("mousedown",r).on("pointerup",s).on("mouseup",s).contextmenu(function(t){t.preventDefault(),e.switchColor(null)})},initCursor:function(){var e=this,t=function(t){e.elements.cursor.css("transform","translate("+t.clientX+"px, "+t.clientY+"px)")};this.elements.boardContainer.on("pointermove",t).on("mousemove",t)},initReticule:function(){var e=this,t=function(t){var n=e.screenToBoardSpace(t.clientX,t.clientY);n.x|=0,n.y|=0;var o=e.boardToScreenSpace(n.x,n.y);e.elements.reticule.css("transform","translate("+o.x+"px, "+o.y+"px)"),e.elements.reticule.css("width",e.scale-1+"px").css("height",e.scale-1+"px"),null===e.color?e.elements.reticule.hide():e.elements.reticule.show()};this.elements.board.on("pointermove",t).on("mousemove",t)},initCoords:function(){var e=this;this.elements.board.on("mousemove",function(t){var n=e.screenToBoardSpace(t.clientX,t.clientY);e.elements.coords.text("("+n.x+", "+n.y+")")})},initAlert:function(){var e=this;this.elements.alert.find(".close").click(function(){e.elements.alert.fadeOut(200)})},initSocket:function(){var e=this,t=0;this.socket=s.a.connect(),this.socket.on("connect",function(){$(".board-container").show(),$(".ui").show(),$(".loading").fadeOut(500),e.elements.alert.fadeOut(200),e.connectionLost&&e.drawBoard()}),this.socket.on("disconnect",function(){e.connectionLost=!0,e.elements.loginButton.prop("disabled",!1),e.alert("Disconnected from server... Attempting to reconnect")});var n=$(".move-ticker-body");this.socket.on("session",function(t){t.userdata?e.onAuthentication(t.userdata):null!==e.username&&e.onAuthentication({success:!1}),t.cooldown?e.updateTime(t.cooldown):e.updateTime(0),e.updateUserCount(t.users.connected),e.updateUserList(t.users)}),this.socket.on("place",function(t){var o=e.elements.board[0].getContext("2d");if(o.fillStyle=t.color,o.fillRect(t.x,t.y,1,1),n.is(":visible")){var i=$("<div>",{class:"chat-line"}).appendTo(n);$("<span>",{class:"username"}).text(t.session_id).appendTo(i),$("<a>",{href:"javascript:App.centerOn("+t.x+","+t.y+")"}).text(": "+t.x+", "+t.y).appendTo(i),n.scrollTop(n.prop("scrollHeight")),n.children().length>=15&&n.children().first().remove()}null!==e.spectate_user&&e.spectate_user===t.session_id&&e.centerOn(t.x,t.y)}),this.socket.on("alert",function(t){e.alert(t)}),this.socket.on("cooldown",function(t){e.updateTime(t)}),this.socket.on("force-sync",function(){e.drawBoard()}),this.socket.on("auth",function(t){t.message&&e.alert(t.message),e.onAuthentication(t)}),this.socket.on("users",function(t){e.updateUserCount(t.connected),e.updateUserList(t)}),this.socket.on("chat",function(n){var o=$(".chat-log"),i=$("<div>",{class:"chat-line"}).appendTo(o),r=$("<span>",{class:"username"}).text(n.id),s=$("<span>",{class:"chat-message"}).text(n.message);e.elements.chatContainer.is(":hidden")&&t<=125?(t++,e.elements.chatToggle.text("Chat ("+t+")")):t=0;var a=void 0,c=void 0,l=void 0,u=!1,h=[];c=/(@[a-z0-9]+)/gi;do{if(a=c.exec(s.html())){var d=a[0].replace("@","").toLowerCase();u||n.chat_id===e.username||d!==e.username&&"everyone"!==d&&"world"!==d||(u=!0,new Notification("Place Reloaded",{body:"Message from "+n.chat_id+": "+n.message}));var f=$("<span>",{class:"username"}).text(a[0]).prop("outerHTML");h.push({div:f,index:a.index,length:a[0].length})}}while(a);for(l=h.length-1;l>=0;l--)s.html(s.html().substr(0,h[l].index)+h[l].div+s.html().substr(h[l].index+h[l].length,s.html().length));h=[],c=/([0-9]+)+,( +)?([0-9]+)/g;do{if(a=c.exec(s.html())){var p=a[0].split(",");if(p[0]<0||p[0]>e.width||p[1]<0||p[1]>e.height)continue;var m=$("<a>",{class:"",href:"javascript:App.centerOn("+p[0]+","+p[1]+")"}).text(a[0]).prop("outerHTML");h.push({div:m,index:a.index,length:a[0].length})}}while(a);for(l=h.length-1;l>=0;l--)s.html(s.html().substr(0,h[l].index)+h[l].div+s.html().substr(h[l].index+h[l].length,s.html().length));n.is_moderator&&r.addClass("moderator"),$("<span>",{class:"timestamp"}).append($("<small>").text(moment().format("HH:mm"))).appendTo(i),r.appendTo(i),$("<span>",{class:"colon"}).text(":").appendTo(i),s.appendTo(i),o.scrollTop(o.prop("scrollHeight")),o.children().length>=125&&o.find(".chat-line:first").remove()})},updateUserList:function(e){var t=$(".moderators"),n=t.closest(".user-list-section");0!==e.moderators.length?(t.empty(),n.show(),e.moderators.forEach(function(e){$("<div>",{class:"username moderator"}).text(e).appendTo(t)})):n.hide(),t=$(".registered"),n=t.closest(".user-list-section"),0!==e.registered.length?(t.empty(),n.show(),e.registered.forEach(function(e){$("<div>",{class:"username"}).text(e).appendTo(t)})):n.hide(),t=$(".anons"),n=t.closest(".user-list-section"),0!==e.anons.length?(t.empty(),n.show(),e.anons.forEach(function(e){$("<div>",{class:"username"}).text(e).appendTo(t)})):n.hide()},initContextMenu:function(){["right","left"].forEach(function(e){$.contextMenu({selector:".username",trigger:e,zIndex:1e3,autoHide:!0,items:{spectate:{name:"Spectate",callback:function(e,t){l.spectate(t.$trigger.text())}},mention:{name:"Mention",callback:function(e,t){l.mention(t.$trigger.text())}}}})})},updateUserCount:function(e){this.elements.usersToggle.fadeIn(200),this.elements.usersToggle.text("Users: "+e)},authenticate:function(){this.socket.emit("auth",{username:$("#username").val(),password:$("#password").val()})},onAuthentication:function(e){if(e.success)this.elements.loginToggle.text("Logout"),this.elements.loginContainer.hide(),this.elements.palette.removeClass("palette-sidebar"),this.username=e.username,e.is_moderator&&!window.ModTools&&$.get("js/mod_tools.js");else{if(null!==this.username)return void location.reload();this.elements.loginToggle.text("Login"),this.elements.loginButton.prop("disabled",!1)}},initSidebar:function(){var e=this;this.elements.chatToggle.click(function(){e.elements.chatContainer.toggle(),e.elements.usersContainer.hide(),e.elements.loginContainer.hide(),e.elements.chatToggle.text("Chat"),e.elements.palette.toggleClass("palette-sidebar",e.elements.chatContainer.is(":visible"))}),this.elements.usersToggle.click(function(){e.elements.chatContainer.hide(),e.elements.usersContainer.toggle(),e.elements.loginContainer.hide(),e.elements.palette.toggleClass("palette-sidebar",e.elements.usersContainer.is(":visible"))}),this.elements.loginToggle.click(function(){if(null!==e.username)return e.socket.emit("logout"),location.reload();e.elements.chatContainer.hide(),e.elements.usersContainer.hide(),e.elements.loginContainer.toggle(),e.elements.palette.toggleClass("palette-sidebar",e.elements.loginContainer.is(":visible"))}),this.elements.loginButton.click(function(t){t.preventDefault(),e.elements.loginButton.prop("disabled",!0),e.authenticate()}),this.elements.chatInput.keypress(function(t){if(13===t.which){t.preventDefault();var n=e.elements.chatInput.val();if(""===n)return;e.socket.emit("chat",n),e.elements.chatInput.val("")}})},initMoveTicker:function(){var e=$(".user-list"),t=$(".move-ticker-header"),n=$(".move-ticker-body");t.click(function(){n.toggle(),n.scrollTop(n.prop("scrollHeight")),n.is(":visible")?e.addClass("user-list-ticker"):e.removeClass("user-list-ticker")})},updateTransform:function(){this.panX<=-this.width/2&&(this.panX=-this.width/2),this.panX>=this.width/2&&(this.panX=this.width/2),this.panY<=-this.height/2&&(this.panY=-this.height/2),this.panY>=this.height/2&&(this.panY=this.height/2),this.elements.boardMover.css("width",this.width+"px").css("height",this.height+"px").css("transform","translate("+this.panX+"px, "+this.panY+"px)"),this.elements.reticule.css("width",this.scale+"px").css("height",this.scale+"px"),this.elements.boardZoomer.css("transform","scale("+this.scale+")")},screenToBoardSpace:function(e,t){var n=this.elements.board[0].getBoundingClientRect();return{x:(e-n.left)/this.scale|0,y:(t-n.top)/this.scale|0}},boardToScreenSpace:function(e,t){var n=this.elements.board[0].getBoundingClientRect();return{x:e*this.scale+n.left,y:t*this.scale+n.top}},centerOn:function(e,t){this.panX=this.width/2-e-.5,this.panY=this.height/2-t-.5,this.elements.coords.text("("+e+", "+t+")"),this.updateTransform()},switchColor:function(e){this.color=e,null===e?this.elements.cursor.hide():(this.elements.cursor.show(),this.elements.cursor.css("background-color",e))},place:function(e,t){null!==this.color&&this.socket.emit("place",{x:e,y:t,color:this.color})},alert:function(e){var t=this.elements.alert;if(null===e)return void this.elements.alert.fadeOut(200);t.find(".text").text(e),t.fadeIn(200)},updateTime:function(e){if(void 0!==e?this.cooldown=e:this.cooldown-=1,this.cooldown<0&&(this.cooldown=0),this.cooldown|=0,0!==this.cooldown){this.elements.timer.show();var t=Math.floor(this.cooldown%60),n=t<10?"0"+t:t,o=Math.floor(this.cooldown/60),i=o<10?"0"+o:o;this.elements.timer.text(i+":"+n),$(".palette-color").css("cursor","not-allowed"),setTimeout(this.updateTime.bind(this),1e3)}else this.elements.timer.hide(),$(".palette-color").css("cursor","")},spectate:function(e){e.startsWith("@")&&(e=e.substr(1)),this.alert("Spectating "+e),this.spectate_user=e},mention:function(e){this.elements.usersContainer.hide(),this.elements.chatContainer.show(),e.startsWith("@")||(e="@"+e),this.elements.chatInput.val(this.elements.chatInput.val()+e+" "),this.elements.chatInput.focus()},toURL:function(){var e=document.getElementById("download");e.href=this.elements.board[0].toDataURL(),e.download="canvas.png"}};var c=window,l=c.App;l.init()},function(e,t){},function(e,t,n){"use strict";var o=n(9),i=n.n(o),r=n(11),s=n.n(r),a=n(12),c=n.n(a),l=function(){function e(){s()(this,e),this.conn=null,this.listeners=[]}return c()(e,[{key:"connect",value:function(){return this.conn=new WebSocket(("https:"===location.protocol?"wss":"ws")+"://"+document.location.host+"/ws"),this.conn.onopen=this.onOpen.bind(this),this.conn.onmessage=this.onMessage.bind(this),this.conn.onclose=this.onClose.bind(this),this}},{key:"on",value:function(e,t){this.listeners[e]=t}},{key:"emitToListeners",value:function(e,t){this.listeners[e](t)}},{key:"emit",value:function(e,t){this.conn.send(i()([e,t]))}},{key:"onOpen",value:function(){this.emitToListeners("connect")}},{key:"onMessage",value:function(e){var t=JSON.parse(e.data);this.emitToListeners(t[0],t[1])}},{key:"onClose",value:function(){this.emitToListeners("disconnect"),this.connect()}}]),e}(),u=new l;t.a=u},function(e,t,n){e.exports={default:n(10),__esModule:!0}},function(e,t,n){var o=n(1),i=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var o=n(13),i=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,i.default)(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}()},function(e,t,n){e.exports={default:n(14),__esModule:!0}},function(e,t,n){n(15);var o=n(1).Object;e.exports=function(e,t,n){return o.defineProperty(e,t,n)}},function(e,t,n){var o=n(16);o(o.S+o.F*!n(0),"Object",{defineProperty:n(4).f})},function(e,t,n){var o=n(3),i=n(1),r=n(17),s=n(19),a=function(e,t,n){var c,l,u,h=e&a.F,d=e&a.G,f=e&a.S,p=e&a.P,m=e&a.B,g=e&a.W,v=d?i:i[t]||(i[t]={}),y=v.prototype,w=d?o:f?o[t]:(o[t]||{}).prototype;d&&(n=t);for(c in n)(l=!h&&w&&void 0!==w[c])&&c in v||(u=l?w[c]:n[c],v[c]=d&&"function"!=typeof w[c]?n[c]:m&&l?r(u,o):g&&w[c]==u?function(e){var t=function(t,n,o){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,o)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(u):p&&"function"==typeof u?r(Function.call,u):u,p&&((v.virtual||(v.virtual={}))[c]=u,e&a.R&&y&&!y[c]&&s(y,c,u)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a},function(e,t,n){var o=n(18);e.exports=function(e,t,n){if(o(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,i){return e.call(t,n,o,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var o=n(4),i=n(24);e.exports=n(0)?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var o=n(2);e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(0)&&!n(5)(function(){return 7!=Object.defineProperty(n(22)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var o=n(2),i=n(3).document,r=o(i)&&o(i.createElement);e.exports=function(e){return r?i.createElement(e):{}}},function(e,t,n){var o=n(2);e.exports=function(e,t){if(!o(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!o(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!o(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!o(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){(function(e,o){function i(e,n){var o={seen:[],stylize:s};return arguments.length>=3&&(o.depth=arguments[2]),arguments.length>=4&&(o.colors=arguments[3]),m(n)?o.showHidden=n:n&&t._extend(o,n),x(o.showHidden)&&(o.showHidden=!1),x(o.depth)&&(o.depth=2),x(o.colors)&&(o.colors=!1),x(o.customInspect)&&(o.customInspect=!0),o.colors&&(o.stylize=r),c(o,e,o.depth)}function r(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function s(e,t){return e}function a(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,n,o){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(o,e);return w(i)||(i=c(e,i,o)),i}var r=l(e,n);if(r)return r;var s=Object.keys(n),m=a(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),k(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(n);if(0===s.length){if(S(n)){var g=n.name?": "+n.name:"";return e.stylize("[Function"+g+"]","special")}if(T(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if($(n))return e.stylize(Date.prototype.toString.call(n),"date");if(k(n))return u(n)}var v="",y=!1,b=["{","}"];if(p(n)&&(y=!0,b=["[","]"]),S(n)){v=" [Function"+(n.name?": "+n.name:"")+"]"}if(T(n)&&(v=" "+RegExp.prototype.toString.call(n)),$(n)&&(v=" "+Date.prototype.toUTCString.call(n)),k(n)&&(v=" "+u(n)),0===s.length&&(!y||0==n.length))return b[0]+v+b[1];if(o<0)return T(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var x;return x=y?h(e,n,o,m,s):s.map(function(t){return d(e,n,o,m,t,y)}),e.seen.pop(),f(x,v,b)}function l(e,t){if(x(t))return e.stylize("undefined","undefined");if(w(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,o,i){for(var r=[],s=0,a=t.length;s<a;++s)A(t,String(s))?r.push(d(e,t,n,o,String(s),!0)):r.push("");return i.forEach(function(i){i.match(/^\d+$/)||r.push(d(e,t,n,o,i,!0))}),r}function d(e,t,n,o,i,r){var s,a,l;if(l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},l.get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),A(o,i)||(s="["+i+"]"),a||(e.seen.indexOf(l.value)<0?(a=g(n)?c(e,l.value,null):c(e,l.value,n-1),a.indexOf("\n")>-1&&(a=r?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),x(s)){if(r&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function f(e,t,n){var o=0;return e.reduce(function(e,t){return o++,t.indexOf("\n")>=0&&o++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function p(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function w(e){return"string"==typeof e}function b(e){return"symbol"==typeof e}function x(e){return void 0===e}function T(e){return C(e)&&"[object RegExp]"===M(e)}function C(e){return"object"==typeof e&&null!==e}function $(e){return C(e)&&"[object Date]"===M(e)}function k(e){return C(e)&&("[object Error]"===M(e)||e instanceof Error)}function S(e){return"function"==typeof e}function O(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function M(e){return Object.prototype.toString.call(e)}function _(e){return e<10?"0"+e.toString(10):e.toString(10)}function j(){var e=new Date,t=[_(e.getHours()),_(e.getMinutes()),_(e.getSeconds())].join(":");return[e.getDate(),R[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var E=/%[sdj%]/g;t.format=function(e){if(!w(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,o=arguments,r=o.length,s=String(e).replace(E,function(e){if("%%"===e)return"%";if(n>=r)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(e){return"[Circular]"}default:return e}}),a=o[n];n<r;a=o[++n])g(a)||!C(a)?s+=" "+a:s+=" "+i(a);return s},t.deprecate=function(n,i){function r(){if(!s){if(o.throwDeprecation)throw new Error(i);o.traceDeprecation?console.trace(i):console.error(i),s=!0}return n.apply(this,arguments)}if(x(e.process))return function(){return t.deprecate(n,i).apply(this,arguments)};if(!0===o.noDeprecation)return n;var s=!1;return r};var I,Y={};t.debuglog=function(e){if(x(I)&&(I=o.env.NODE_DEBUG||""),e=e.toUpperCase(),!Y[e])if(new RegExp("\\b"+e+"\\b","i").test(I)){var n=o.pid;Y[e]=function(){var o=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,o)}}else Y[e]=function(){};return Y[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=m,t.isNull=g,t.isNullOrUndefined=v,t.isNumber=y,t.isString=w,t.isSymbol=b,t.isUndefined=x,t.isRegExp=T,t.isObject=C,t.isDate=$,t.isError=k,t.isFunction=S,t.isPrimitive=O,t.isBuffer=n(28);var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",j(),t.format.apply(t,arguments))},t.inherits=n(29),t._extend=function(e,t){if(!t||!C(t))return e;for(var n=Object.keys(t),o=n.length;o--;)e[n[o]]=t[n[o]];return e}}).call(t,n(26),n(27))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function r(e){if(h===clearTimeout)return clearTimeout(e);if((h===o||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function s(){m&&f&&(m=!1,f.length?p=f.concat(p):g=-1,p.length&&a())}function a(){if(!m){var e=i(s);m=!0;for(var t=p.length;t;){for(f=p,p=[];++g<t;)f&&f[g].run();g=-1,t=p.length}f=null,m=!1,r(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var u,h,d=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{h="function"==typeof clearTimeout?clearTimeout:o}catch(e){h=o}}();var f,p=[],m=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new c(e,t)),1!==p.length||m||i(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}]);